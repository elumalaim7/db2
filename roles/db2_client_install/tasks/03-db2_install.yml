---
- name: Execute the db2 client installation
  command: "{{ tmp_dir }}/db2/client/db2setup -r {{ tmp_dir }}/db2/db2in.rsp"
  register: db2_client_setup
  args: 
      creates: "{{resp.file}}"
  tags: install

- name: Setup results
  debug: var=db2_setup
  tags: download

- name: Validating the current installation
  command: "{{resp.file}}/bin/db2val -o"
  register: db2_val
  failed_when: "'DBI1335I' not in db2_val.stdout"
  changed_when: False
  tags: ['install', 'validate']

- name: Validate results
  debug: var=db2_val
  tags: download

- name: verify DB2 instance creation status
  command: "{{ db2_home_path }}/bin/db2ilist"
  register: db2_client_instance_status

- name: Print DB2 instance output
  debug:
    msg: "{{ db2_client_instance_status }}" 

